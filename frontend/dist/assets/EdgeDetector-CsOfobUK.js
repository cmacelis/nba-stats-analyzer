import{g as H,d as q,e as $,U as we,_ as h,a5 as Pe,r as p,m as X,G as $e,j as t,o as N,h as P,p as K,P as be,l as V,x as ee,F as Te,T as m,S as De,M as pe,q as We,t as Re,c as fe,X as Be,y as Me,B as _,C as ve,A as ue,a as he,z as _e,w as Z,I as Fe}from"./index-D938L-uP.js";import{u as je,B as Ie,d as ze,a as Ae,e as Ne,F as se,I as oe,S as ne,M as re,T as ie,P as ke}from"./PlayerAvatar-8fWb5i2t.js";import{j as Le,T as Ue,a as Oe,c as Se,d as B,b as Ee,k as He,D as xe}from"./useNbaData-D8nRe-iJ.js";import{T as qe}from"./TableHead-lIVOiREc.js";import{T as ge,a as J}from"./ToggleButtonGroup-CvrtXAXh.js";import{I as te,T as Xe,a as Ke}from"./TrendingUp-6AY9u0K7.js";import{C as le}from"./Chip-D3osFpNB.js";function Ye(e){return H("PrivateSwitchBase",e)}q("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ge=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ve=e=>{const{classes:a,checked:s,disabled:o,edge:i}=e,n={root:["root",s&&"checked",o&&"disabled",i&&`edge${P(i)}`],input:["input"]};return K(n,Ye,a)},Je=$(we)(({ownerState:e})=>h({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Qe=$("input",{shouldForwardProp:Pe})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ze=p.forwardRef(function(a,s){const{autoFocus:o,checked:i,checkedIcon:n,className:c,defaultChecked:d,disabled:l,disableFocusRipple:v=!1,edge:g=!1,icon:b,id:k,inputProps:F,inputRef:I,name:M,onBlur:y,onChange:j,onFocus:T,readOnly:D,required:z=!1,tabIndex:W,type:S,value:x}=a,u=X(a,Ge),[f,Y]=$e({controlled:i,default:!!d,name:"SwitchBase",state:"checked"}),C=je(),O=U=>{T&&T(U),C&&C.onFocus&&C.onFocus(U)},E=U=>{y&&y(U),C&&C.onBlur&&C.onBlur(U)},G=U=>{if(U.nativeEvent.defaultPrevented)return;const de=U.target.checked;Y(de),j&&j(U,de)};let r=l;C&&typeof r>"u"&&(r=C.disabled);const R=S==="checkbox"||S==="radio",L=h({},a,{checked:f,disabled:r,disableFocusRipple:v,edge:g}),A=Ve(L);return t.jsxs(Je,h({component:"span",className:N(A.root,c),centerRipple:!0,focusRipple:!v,disabled:r,tabIndex:null,role:void 0,onFocus:O,onBlur:E,ownerState:L,ref:s},u,{children:[t.jsx(Qe,h({autoFocus:o,checked:i,defaultChecked:d,className:A.input,disabled:r,id:R?k:void 0,name:M,onChange:G,readOnly:D,ref:I,required:z,ownerState:L,tabIndex:W,type:S},S==="checkbox"&&x===void 0?{}:{value:x},F)),f?n:b]}))});function et(e){return H("MuiDialog",e)}const ae=q("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Ce=p.createContext({}),tt=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],at=$(Ie,{name:"MuiDialog",slot:"Backdrop",overrides:(e,a)=>a.backdrop})({zIndex:-1}),st=e=>{const{classes:a,scroll:s,maxWidth:o,fullWidth:i,fullScreen:n}=e,c={root:["root"],container:["container",`scroll${P(s)}`],paper:["paper",`paperScroll${P(s)}`,`paperWidth${P(String(o))}`,i&&"paperFullWidth",n&&"paperFullScreen"]};return K(c,et,a)},ot=$(ze,{name:"MuiDialog",slot:"Root",overridesResolver:(e,a)=>a.root})({"@media print":{position:"absolute !important"}}),nt=$("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.container,a[`scroll${P(s.scroll)}`]]}})(({ownerState:e})=>h({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),rt=$(be,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.paper,a[`scrollPaper${P(s.scroll)}`],a[`paperWidth${P(String(s.maxWidth))}`],s.fullWidth&&a.paperFullWidth,s.fullScreen&&a.paperFullScreen]}})(({theme:e,ownerState:a})=>h({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},a.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},a.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!a.maxWidth&&{maxWidth:"calc(100% - 64px)"},a.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${ae.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.maxWidth&&a.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[a.maxWidth]}${e.breakpoints.unit}`,[`&.${ae.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[a.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.fullWidth&&{width:"calc(100% - 64px)"},a.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${ae.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),it=p.forwardRef(function(a,s){const o=V({props:a,name:"MuiDialog"}),i=ee(),n={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":d,BackdropComponent:l,BackdropProps:v,children:g,className:b,disableEscapeKeyDown:k=!1,fullScreen:F=!1,fullWidth:I=!1,maxWidth:M="sm",onBackdropClick:y,onClick:j,onClose:T,open:D,PaperComponent:z=be,PaperProps:W={},scroll:S="paper",TransitionComponent:x=Ae,transitionDuration:u=n,TransitionProps:f}=o,Y=X(o,tt),C=h({},o,{disableEscapeKeyDown:k,fullScreen:F,fullWidth:I,maxWidth:M,scroll:S}),O=st(C),E=p.useRef(),G=A=>{E.current=A.target===A.currentTarget},r=A=>{j&&j(A),E.current&&(E.current=null,y&&y(A),T&&T(A,"backdropClick"))},R=Te(d),L=p.useMemo(()=>({titleId:R}),[R]);return t.jsx(ot,h({className:N(O.root,b),closeAfterTransition:!0,components:{Backdrop:at},componentsProps:{backdrop:h({transitionDuration:u,as:l},v)},disableEscapeKeyDown:k,onClose:T,open:D,ref:s,onClick:r,ownerState:C},Y,{children:t.jsx(x,h({appear:!0,in:D,timeout:u,role:"presentation"},f,{children:t.jsx(nt,{className:N(O.container),onMouseDown:G,ownerState:C,children:t.jsx(rt,h({as:z,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":R},W,{className:N(O.paper,W.className),ownerState:C,children:t.jsx(Ce.Provider,{value:L,children:g})}))})}))}))});function lt(e){return H("MuiDialogActions",e)}q("MuiDialogActions",["root","spacing"]);const ct=["className","disableSpacing"],dt=e=>{const{classes:a,disableSpacing:s}=e;return K({root:["root",!s&&"spacing"]},lt,a)},pt=$("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,!s.disableSpacing&&a.spacing]}})(({ownerState:e})=>h({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),ut=p.forwardRef(function(a,s){const o=V({props:a,name:"MuiDialogActions"}),{className:i,disableSpacing:n=!1}=o,c=X(o,ct),d=h({},o,{disableSpacing:n}),l=dt(d);return t.jsx(pt,h({className:N(l.root,i),ownerState:d,ref:s},c))});function ht(e){return H("MuiDialogContent",e)}q("MuiDialogContent",["root","dividers"]);function xt(e){return H("MuiDialogTitle",e)}const gt=q("MuiDialogTitle",["root"]),mt=["className","dividers"],bt=e=>{const{classes:a,dividers:s}=e;return K({root:["root",s&&"dividers"]},ht,a)},ft=$("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,s.dividers&&a.dividers]}})(({theme:e,ownerState:a})=>h({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},a.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${gt.root} + &`]:{paddingTop:0}})),vt=p.forwardRef(function(a,s){const o=V({props:a,name:"MuiDialogContent"}),{className:i,dividers:n=!1}=o,c=X(o,mt),d=h({},o,{dividers:n}),l=bt(d);return t.jsx(ft,h({className:N(l.root,i),ownerState:d,ref:s},c))}),jt=["className","id"],kt=e=>{const{classes:a}=e;return K({root:["root"]},xt,a)},St=$(m,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),Ct=p.forwardRef(function(a,s){const o=V({props:a,name:"MuiDialogTitle"}),{className:i,id:n}=o,c=X(o,jt),d=o,l=kt(d),{titleId:v=n}=p.useContext(Ce);return t.jsx(St,h({component:"h2",className:N(l.root,i),ownerState:d,ref:s,variant:"h6",id:n??v},c))});function yt(e){return H("MuiFormControlLabel",e)}const Q=q("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),wt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Pt=e=>{const{classes:a,disabled:s,labelPlacement:o,error:i,required:n}=e,c={root:["root",s&&"disabled",`labelPlacement${P(o)}`,i&&"error",n&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",i&&"error"]};return K(c,yt,a)},$t=$("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[{[`& .${Q.label}`]:a.label},a.root,a[`labelPlacement${P(s.labelPlacement)}`]]}})(({theme:e,ownerState:a})=>h({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Q.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Q.label}`]:{[`&.${Q.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Tt=$("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,a)=>a.asterisk})(({theme:e})=>({[`&.${Q.error}`]:{color:(e.vars||e).palette.error.main}})),Dt=p.forwardRef(function(a,s){var o,i;const n=V({props:a,name:"MuiFormControlLabel"}),{className:c,componentsProps:d={},control:l,disabled:v,disableTypography:g,label:b,labelPlacement:k="end",required:F,slotProps:I={}}=n,M=X(n,wt),y=je(),j=(o=v??l.props.disabled)!=null?o:y==null?void 0:y.disabled,T=F??l.props.required,D={disabled:j,required:T};["checked","name","onChange","value","inputRef"].forEach(f=>{typeof l.props[f]>"u"&&typeof n[f]<"u"&&(D[f]=n[f])});const z=Ne({props:n,muiFormControl:y,states:["error"]}),W=h({},n,{disabled:j,labelPlacement:k,required:T,error:z.error}),S=Pt(W),x=(i=I.typography)!=null?i:d.typography;let u=b;return u!=null&&u.type!==m&&!g&&(u=t.jsx(m,h({component:"span"},x,{className:N(S.label,x==null?void 0:x.className),children:u}))),t.jsxs($t,h({className:N(S.root,c),ownerState:W,ref:s},M,{children:[p.cloneElement(l,D),T?t.jsxs(De,{display:"block",children:[u,t.jsxs(Tt,{ownerState:W,"aria-hidden":!0,className:S.asterisk,children:[" ","*"]})]}):u]}))});function Wt(e){return H("MuiSwitch",e)}const w=q("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Rt=["className","color","edge","size","sx"],Bt=e=>{const{classes:a,edge:s,size:o,color:i,checked:n,disabled:c}=e,d={root:["root",s&&`edge${P(s)}`,`size${P(o)}`],switchBase:["switchBase",`color${P(i)}`,n&&"checked",c&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=K(d,Wt,a);return h({},a,l)},Mt=$("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,s.edge&&a[`edge${P(s.edge)}`],a[`size${P(s.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${w.thumb}`]:{width:16,height:16},[`& .${w.switchBase}`]:{padding:4,[`&.${w.checked}`]:{transform:"translateX(16px)"}}}}]}),_t=$(Ze,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.switchBase,{[`& .${w.input}`]:a.input},s.color!=="default"&&a[`color${P(s.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${w.checked}`]:{transform:"translateX(20px)"},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${w.checked} + .${w.track}`]:{opacity:.5},[`&.${w.disabled} + .${w.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${w.input}`]:{left:"-100%",width:"300%"}}),({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:pe(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(([,a])=>a.main&&a.light).map(([a])=>({props:{color:a},style:{[`&.${w.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pe(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?We(e.palette[a].main,.62):Re(e.palette[a].main,.55)}`}},[`&.${w.checked} + .${w.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]})),Ft=$("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),It=$("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),zt=p.forwardRef(function(a,s){const o=V({props:a,name:"MuiSwitch"}),{className:i,color:n="primary",edge:c=!1,size:d="medium",sx:l}=o,v=X(o,Rt),g=h({},o,{color:n,edge:c,size:d}),b=Bt(g),k=t.jsx(It,{className:b.thumb,ownerState:g});return t.jsxs(Mt,{className:N(b.root,i),sx:l,ownerState:g,children:[t.jsx(_t,h({type:"checkbox",icon:k,checkedIcon:k,ref:s,ownerState:g},v,{classes:h({},b,{root:b.switchBase})})),t.jsx(Ft,{className:b.track,ownerState:g})]})}),ce=fe(t.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),At=fe(t.jsx("path",{d:"M11 21h-1l1-7H7.5c-.88 0-.33-.75-.31-.78C8.48 10.94 10.42 7.54 13.01 3h1l-1 7h3.51c.4 0 .62.19.4.66C12.97 17.55 11 21 11 21"}),"BoltOutlined"),me=[{value:"pts",label:"PTS (Points)"},{value:"pra",label:"PRA (Pts + Reb + Ast)"}],Nt=[{value:2025,label:"2025-26"},{value:2024,label:"2024-25"},{value:2023,label:"2023-24"},{value:2022,label:"2022-23"}],Lt=[{value:"pts",label:"Points"},{value:"reb",label:"Rebounds"},{value:"ast",label:"Assists"},{value:"pra",label:"PRA"}];function ye(e){return e>0?`+${e.toFixed(1)}`:e.toFixed(1)}function Ut(e){const a=Math.abs(e);return a>=5?"high":a>=2?"medium":"low"}const Ot=({values:e,seasonAvg:a})=>{const s=ee(),o=24,i=6,n=3,c=e.length*(i+n)-n,d=Math.max(...e,a)*1.1||1;return t.jsx("svg",{width:c,height:o,style:{display:"block"},children:e.map((l,v)=>{const g=Math.max(2,Math.round(l/d*o)),b=l>=a?s.palette.success.main:s.palette.error.main;return t.jsx("rect",{x:v*(i+n),y:o-g,width:i,height:g,rx:1,fill:b,opacity:.85},v)})})},Et=({entry:e,stat:a,season:s,minMinutes:o,initialDirection:i,onClose:n,onNavigate:c})=>{const d=ee(),l=He(),[v,g]=p.useState(a),[b,k]=p.useState(i??(e.delta>0?"over":"under")),[F,I]=p.useState(Ut(e.delta)),[M,y]=p.useState(""),[j,T]=p.useState(""),[D,z]=p.useState(null),W=e.delta>0,S=M.trim()!==""&&!isNaN(parseFloat(M)),x=async()=>{const u=await l.mutateAsync({player_id:e.player_id,player_name:e.player_name,team:e.team,stat:v,season_used:s,season_avg:e.season_avg,l5_avg:e.recent_avg,delta:e.delta,min_minutes:o,direction:b,confidence_tier:F,...S&&{line:parseFloat(M)},...j.trim()&&{notes:j.trim()}}),f=S?"Bet":"Signal";u.configured===!1?z(`Tracked (${f}) — set up Vercel KV for cross-device sync.`):z(`Tracked (${f})`),setTimeout(n,1400)};return t.jsxs(t.Fragment,{children:[t.jsxs(it,{open:!0,onClose:n,maxWidth:"xs",fullWidth:!0,children:[t.jsx(Ct,{sx:{pb:1},children:t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[t.jsx(ke,{name:e.player_name,photoUrl:e.photo_url??void 0,size:40}),t.jsxs(_,{children:[t.jsx(m,{fontWeight:700,children:e.player_name}),t.jsx(m,{variant:"caption",color:"text.secondary",children:e.team})]})]})}),t.jsxs(vt,{sx:{pt:1},children:[t.jsxs(_,{sx:{display:"flex",gap:2,mb:2,p:1.5,bgcolor:"background.default",borderRadius:1},children:[t.jsxs(_,{sx:{textAlign:"center"},children:[t.jsx(m,{variant:"caption",color:"text.secondary",children:"Season avg"}),t.jsx(m,{fontWeight:600,children:e.season_avg.toFixed(1)})]}),t.jsx(xe,{orientation:"vertical",flexItem:!0}),t.jsxs(_,{sx:{textAlign:"center"},children:[t.jsx(m,{variant:"caption",color:"text.secondary",children:"L5 avg"}),t.jsx(m,{fontWeight:600,children:e.recent_avg.toFixed(1)})]}),t.jsx(xe,{orientation:"vertical",flexItem:!0}),t.jsxs(_,{sx:{textAlign:"center"},children:[t.jsx(m,{variant:"caption",color:"text.secondary",children:"Δ"}),t.jsx(m,{fontWeight:700,color:W?d.palette.success.main:d.palette.error.main,children:ye(e.delta)})]})]}),t.jsxs(se,{size:"small",fullWidth:!0,sx:{mb:2},children:[t.jsx(oe,{children:"Stat"}),t.jsx(ne,{value:v,label:"Stat",onChange:u=>g(u.target.value),children:Lt.map(u=>t.jsx(re,{value:u.value,children:u.label},u.value))})]}),t.jsx(m,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Direction"}),t.jsxs(ge,{exclusive:!0,value:b,onChange:(u,f)=>f&&k(f),size:"small",fullWidth:!0,sx:{mb:2},children:[t.jsx(J,{value:"over",sx:{fontWeight:700,color:b==="over"?"success.main":void 0},children:"Over ↑"}),t.jsx(J,{value:"under",sx:{fontWeight:700,color:b==="under"?"error.main":void 0},children:"Under ↓"})]}),t.jsx(m,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Confidence"}),t.jsxs(ge,{exclusive:!0,value:F,onChange:(u,f)=>f&&I(f),size:"small",fullWidth:!0,sx:{mb:2},children:[t.jsx(J,{value:"low",children:"Low"}),t.jsx(J,{value:"medium",children:"Medium"}),t.jsx(J,{value:"high",children:"High"})]}),t.jsx(ie,{size:"small",label:"Sportsbook line (optional — makes this a Bet)",type:"number",value:M,onChange:u=>y(u.target.value),placeholder:e.season_avg.toFixed(1),InputProps:{startAdornment:t.jsx(te,{position:"start",children:"O/U"}),endAdornment:M.trim()?t.jsx(te,{position:"end",children:t.jsx(le,{label:"Bet",size:"small",color:"secondary",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})}):t.jsx(te,{position:"end",children:t.jsx(le,{label:"Signal",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})})},fullWidth:!0,sx:{mb:1.5}}),t.jsx(ie,{size:"small",label:"Rationale / notes (optional)",value:j,onChange:u=>T(u.target.value),multiline:!0,minRows:2,inputProps:{maxLength:280},placeholder:"e.g. Hot streak, favourable matchup vs poor perimeter D",fullWidth:!0,helperText:j.length>0?`${j.length}/280`:void 0})]}),t.jsxs(ut,{sx:{px:3,pb:2,gap:1},children:[t.jsx(he,{variant:"outlined",size:"small",onClick:c,children:"Compare Players"}),t.jsxs(he,{variant:"contained",size:"small",onClick:x,disabled:l.isPending,startIcon:l.isPending?t.jsx(ve,{size:14}):t.jsx(ce,{}),children:["Track ",S?"Bet":"Signal"]})]})]}),t.jsx(_e,{open:!!D,autoHideDuration:2500,onClose:()=>z(null),message:D,anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})},Ht=({rank:e,entry:a,stat:s,onCompare:o,onTrack:i})=>{const n=ee(),c=a.delta>0,d=s==="pra"?"PRA":"PTS";return t.jsxs(Se,{hover:!0,onClick:o,sx:{cursor:"pointer"},children:[t.jsx(B,{sx:{color:"text.disabled",fontWeight:600,width:36},children:e}),t.jsx(B,{children:t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[t.jsx(ke,{name:a.player_name,photoUrl:a.photo_url??void 0,size:36}),t.jsxs(_,{children:[t.jsx(m,{variant:"body2",fontWeight:600,sx:{lineHeight:1.2},children:a.player_name}),t.jsxs(m,{variant:"caption",color:"text.secondary",children:[a.team_abbrev," · ",a.games_played,"G"]})]})]})}),t.jsx(B,{align:"center",sx:{color:"text.secondary"},children:t.jsx(Z,{title:`Season avg ${d}`,children:t.jsx("span",{children:a.season_avg.toFixed(1)})})}),t.jsx(B,{align:"center",sx:{fontWeight:600},children:t.jsx(Z,{title:`Last 5 avg ${d}`,children:t.jsx("span",{children:a.recent_avg.toFixed(1)})})}),t.jsx(B,{align:"center",children:t.jsx(le,{size:"small",icon:c?t.jsx(Xe,{}):t.jsx(Ke,{}),label:ye(a.delta),sx:{fontWeight:700,bgcolor:c?n.palette.success.light:n.palette.error.light,color:c?n.palette.success.dark:n.palette.error.dark,border:"none"}})}),t.jsx(B,{align:"center",sx:{minWidth:72},children:t.jsx(Z,{title:`Last 5: ${a.last5.join(" → ")}`,children:t.jsx(_,{sx:{display:"flex",justifyContent:"center"},children:t.jsx(Ot,{values:a.last5,seasonAvg:a.season_avg})})})}),t.jsx(B,{align:"center",sx:{width:44,pr:.5},children:t.jsx(Z,{title:"Track this pick",children:t.jsx(Fe,{size:"small",color:"primary",onClick:i,sx:{"&:hover":{bgcolor:"primary.light",color:"primary.contrastText"}},children:t.jsx(ce,{fontSize:"small"})})})})]})},Qt=()=>{var G;const e=Be(),[a]=Me(),s=a.get("stat"),o=a.get("s"),i=a.get("min_minutes"),n=a.get("track_player_id"),c=a.get("track_stat"),d=a.get("track_direction"),[l,v]=p.useState(s??"pts"),[g,b]=p.useState(i?parseInt(i,10):20),[k,F]=p.useState(o?parseInt(o,10):2025),[I,M]=p.useState(!1),[y,j]=p.useState(null),[T,D]=p.useState(),[z,W]=p.useState(),S=p.useRef(!1),{data:x,isLoading:u,error:f}=Le(l,g,k);p.useEffect(()=>{if(!n||!(x!=null&&x.data)||S.current)return;const r=parseInt(n,10),R=x.data.find(A=>A.player_id===r);if(!R)return;S.current=!0,j(R),D(c??void 0),W(d??void 0);const L=new URLSearchParams({stat:l,s:String(k),min_minutes:String(g)});e(`/edge?${L.toString()}`,{replace:!0})},[x,n]);const Y=p.useMemo(()=>{const r=(x==null?void 0:x.data)??[];return I?r.filter(R=>R.delta>0):r},[x,I]),C=r=>{const R=new URLSearchParams({p1:String(r.player_id),p1n:r.player_name,p1t:r.team,s:String(k)});e(`/compare?${R.toString()}`)},O=l==="pra"?"PRA":"PTS",E=x!=null&&x.generated_at?new Date(x.generated_at).toLocaleTimeString():null;return t.jsxs(_,{sx:{p:3,maxWidth:980,mx:"auto"},children:[t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(At,{color:"primary"}),t.jsx(m,{variant:"h4",fontWeight:700,children:"Edge Feed"})]}),t.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Players ranked by momentum discrepancy — season average vs last 5 games. Click a row to compare; click ",t.jsx(ce,{sx:{fontSize:14,verticalAlign:"middle"}})," to track a pick."]}),t.jsxs(_,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:3,alignItems:"center"},children:[t.jsxs(se,{size:"small",sx:{minWidth:200},children:[t.jsx(oe,{children:"Stat"}),t.jsx(ne,{value:l,label:"Stat",onChange:r=>v(r.target.value),children:me.map(r=>t.jsx(re,{value:r.value,children:r.label},r.value))})]}),t.jsxs(se,{size:"small",sx:{minWidth:130},children:[t.jsx(oe,{children:"Season"}),t.jsx(ne,{value:k,label:"Season",onChange:r=>F(r.target.value),children:Nt.map(r=>t.jsx(re,{value:r.value,children:r.label},r.value))})]}),t.jsx(ie,{size:"small",label:"Min minutes",type:"number",value:g,onChange:r=>b(Math.max(0,parseInt(r.target.value)||0)),inputProps:{min:0,max:48,step:5},sx:{width:130}}),t.jsx(Dt,{control:t.jsx(zt,{checked:I,onChange:r=>M(r.target.checked),size:"small"}),label:t.jsxs(m,{variant:"body2",children:["Positive Δ only"," ",t.jsx(m,{component:"span",variant:"caption",color:"text.secondary",children:"(overs)"})]})}),E&&t.jsxs(m,{variant:"caption",color:"text.disabled",sx:{ml:"auto"},children:["Updated ",E]})]}),u?t.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,my:8},children:[t.jsx(ve,{size:28}),t.jsx(m,{color:"text.secondary",children:"Building edge feed…"})]}):f?t.jsx(ue,{severity:"error",children:"Failed to load edge feed. Please try again."}):Y.length===0?t.jsx(ue,{severity:"info",children:"No players matched filters. Try lowering minimum minutes or disabling positive-only."}):t.jsx(Ue,{children:t.jsxs(Oe,{size:"small",children:[t.jsx(qe,{children:t.jsxs(Se,{children:[t.jsx(B,{sx:{fontWeight:700,color:"text.secondary"},children:"#"}),t.jsx(B,{sx:{fontWeight:700},children:"Player"}),t.jsxs(B,{align:"center",sx:{fontWeight:700},children:["Season ",O]}),t.jsxs(B,{align:"center",sx:{fontWeight:700},children:["L5 ",O]}),t.jsx(B,{align:"center",sx:{fontWeight:700},children:"Δ"}),t.jsx(B,{align:"center",sx:{fontWeight:700},children:"Trend"}),t.jsx(B,{sx:{width:44}})]})}),t.jsx(Ee,{children:Y.map((r,R)=>t.jsx(Ht,{rank:R+1,entry:r,stat:l,onCompare:()=>C(r),onTrack:L=>{L.stopPropagation(),j(r)}},r.player_id))})]})}),t.jsxs(m,{variant:"caption",color:"text.disabled",sx:{mt:3,display:"block"},children:[(G=me.find(r=>r.value===l))==null?void 0:G.label," · min ",g," min/game · via BallDontLie · refreshes every 10 min"]}),y&&t.jsx(Et,{entry:y,stat:T??l,season:k,minMinutes:g,initialDirection:z,onClose:()=>{j(null),D(void 0),W(void 0)},onNavigate:()=>{j(null),D(void 0),W(void 0),C(y)}})]})};export{Qt as default};
//# sourceMappingURL=EdgeDetector-CsOfobUK.js.map
