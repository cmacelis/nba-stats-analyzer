import{c as j,j as e,V as U,B as l,T as s,P as x,W as G,C as f,X as V,A as z,r as H,b as O}from"./index-D9nbruLe.js";import{h as N,T,a as L,c as p,d as r,b as W,D as K}from"./useNbaData-1LxKfKvx.js";import{u as Q,C as c}from"./Chip-DrcwLhod.js";import{C as q,c as Y,d as J,P as X,L as Z,e as ee,p as te,a as se,f as re,U as ne}from"./index-CHhRomMb.js";import{G as o}from"./Grid--H9pU6o7.js";import{T as E}from"./TableHead-_rOPO0we.js";import"./dataMappers-1bDpCiFz.js";const ae=j(e.jsx("path",{d:"m19 21-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1zM17.83 9 15 6.17l1.41-1.41 1.41 1.41 3.54-3.54 1.41 1.41z"}),"BookmarkAdded"),R=j(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),ie=j(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),le=j(e.jsx("path",{d:"M21 6.5c-1.66 0-3 1.34-3 3 0 .07 0 .14.01.21l-2.03.68c-.64-1.21-1.82-2.09-3.22-2.32V5.91C14.04 5.57 15 4.4 15 3c0-1.66-1.34-3-3-3S9 1.34 9 3c0 1.4.96 2.57 2.25 2.91v2.16c-1.4.23-2.58 1.11-3.22 2.32l-2.04-.68C6 9.64 6 9.57 6 9.5c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3c1.06 0 1.98-.55 2.52-1.37l2.03.68c-.2 1.29.17 2.66 1.09 3.69l-1.41 1.77C6.85 17.09 6.44 17 6 17c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3c0-.68-.22-1.3-.6-1.8l1.41-1.77c1.36.76 3.02.75 4.37 0l1.41 1.77c-.37.5-.59 1.12-.59 1.8 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3c-.44 0-.85.09-1.23.26l-1.41-1.77c.93-1.04 1.29-2.4 1.09-3.69l2.03-.68c.53.82 1.46 1.37 2.52 1.37 1.66 0 3-1.34 3-3S22.66 6.5 21 6.5m-18 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1M6 21c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m5-18c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m1 12c-1.38 0-2.5-1.12-2.5-2.5S10.62 10 12 10s2.5 1.12 2.5 2.5S13.38 15 12 15m6 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m3-8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"HubOutlined"),oe=j(e.jsx("path",{d:"M19.88 18.47c.44-.7.7-1.51.7-2.39 0-2.49-2.01-4.5-4.5-4.5s-4.5 2.01-4.5 4.5 2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21.58 23 23 21.58zm-3.8.11c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5m-.36-8.5c-.74.02-1.45.18-2.1.45l-.55-.83-3.8 6.18-3.01-3.52-3.63 5.81L1 17l5-8 3 3.5L13 6zm2.59.5c-.64-.28-1.33-.45-2.05-.49L21.38 2 23 3.18z"}),"QueryStats"),ce=j(e.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage"),de=j(e.jsx("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07"}),"TrackChanges");function he(n,i=2){return n==null?"N/A":n===0?"0":Math.abs(n)<.01?n.toExponential(i):Math.abs(n)>=1e6?`${(n/1e6).toFixed(i)}M`:Math.abs(n)>=1e3?`${(n/1e3).toFixed(i)}K`:n.toFixed(i)}function xe(n){return n<1e3?`${Math.round(n)}ms`:`${(n/1e3).toFixed(2)}s`}q.register(Y,J,X,Z,ee,te,se);const y=({label:n,value:i,target:h,unit:a="ms"})=>{const g=Math.min(i/h*100,100),m=g>90?"error":g>75?"warning":"success";return e.jsx(G,{animation:"fadeIn",children:e.jsx(x,{sx:{p:2},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(f,{variant:"determinate",value:g,color:m,size:60}),e.jsxs(s,{variant:"h6",sx:{mt:1},children:[a==="ms"?xe(i):he(i),a]}),e.jsx(s,{variant:"body2",color:"text.secondary",children:n})]})})})},me=()=>{const{metrics:n,history:i}=U(),h={labels:i.map(a=>new Date(a.timestamp).toLocaleTimeString()),datasets:[{label:"FCP",data:i.map(a=>a.FCP),borderColor:"rgb(75, 192, 192)",tension:.1},{label:"LCP",data:i.map(a=>a.LCP),borderColor:"rgb(255, 99, 132)",tension:.1}]};return e.jsxs(l,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"Performance Metrics"}),e.jsxs(o,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(y,{label:"First Contentful Paint",value:n.FCP,target:2e3})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(y,{label:"Largest Contentful Paint",value:n.LCP,target:2500})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(y,{label:"Cumulative Layout Shift",value:n.CLS,target:.1,unit:""})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(y,{label:"First Input Delay",value:n.FID,target:100})})]}),e.jsxs(x,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Performance Trends"}),e.jsx(l,{sx:{height:300},children:e.jsx(re,{data:h,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Time (ms)"}}}}})})]})]})},je="".replace(/\/$/,""),pe=[{path:"/api/health",label:"Health check",method:"GET"},{path:"/api/players?search=",label:"Player search",method:"GET"},{path:"/api/players/:id/stats",label:"Player season stats",method:"GET"},{path:"/api/players/compare/:id1/:id2",label:"Head-to-head compare",method:"GET"},{path:"/api/players/photo",label:"Player headshot URL",method:"GET"},{path:"/api/games",label:"Upcoming games (odds)",method:"GET"},{path:"/api/research/generate",label:"AI edge research",method:"POST"},{path:"/api/edge",label:"Edge Feed (momentum)",method:"GET"},{path:"/api/picks",label:"Pick history (read)",method:"GET"},{path:"/api/picks",label:"Track new pick",method:"POST"},{path:"/api/alerts/run",label:"Discord alert run",method:"POST"}],ge=[{label:"NBA Roster (name → person ID)",ttl:"24 h",scope:"Server",note:"Populated on first player search per Vercel instance"},{label:"Player stats / search",ttl:"5 min",scope:"Browser",note:"React Query stale time"},{label:"Player photos",ttl:"24 h",scope:"Browser",note:"React Query stale time"},{label:"Upcoming games (odds)",ttl:"5 min",scope:"Browser",note:"React Query stale time"},{label:"Prediction result",ttl:"Session",scope:"Browser",note:"React useMemo — recalculates on player or season change"},{label:"Tracked picks",ttl:"90 days",scope:"Server",note:"Vercel KV (Redis sorted set); pruned automatically on write"}];function ue(n){const i=Math.floor(n/3600),h=Math.floor(n%3600/60);return i>0?`${i}h ${h}m`:`${h}m`}function ye(){return H.useMemo(()=>{const n="nba_prediction_log",i=Date.now(),h=JSON.parse(localStorage.getItem(n)||"[]");return{last7d:h.filter(a=>new Date(a).getTime()>i-7*864e5).length,last30d:h.filter(a=>new Date(a).getTime()>i-30*864e5).length}},[])}const Te=()=>{var D,B;const n=V(),{last7d:i,last30d:h}=ye(),a=N("30d"),g=Date.now(),m=((D=a.data)==null?void 0:D.data)??[],b=m.filter(t=>new Date(t.created_at).getTime()>g-7*864e5),k=b.length,v=m.length,A=b.filter(t=>t.type==="signal").length,$=b.filter(t=>t.type==="bet").length,w=m.filter(t=>t.type==="signal").length,I=m.filter(t=>t.type==="bet").length,C=m.slice(0,5),_=((B=a.data)==null?void 0:B.configured)??!0,{data:d,isLoading:S,isError:M}=Q({queryKey:["health"],queryFn:()=>O.get(`${je}/api/health`).then(t=>t.data),staleTime:6e4,refetchInterval:6e4,retry:1}),P=!S&&!M&&!!d,F=(t,u)=>{n(`/predict?p1=${t.id}&p1n=${encodeURIComponent(t.name)}&p1t=${encodeURIComponent(t.team)}&p2=${u.id}&p2n=${encodeURIComponent(u.name)}&p2t=${encodeURIComponent(u.team)}&s=2025`)};return e.jsxs(l,{sx:{p:3,maxWidth:900,mx:"auto"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(oe,{color:"primary"}),e.jsx(s,{variant:"h4",fontWeight:700,children:"App Status"})]}),e.jsxs(o,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2.5,height:"100%"},children:[e.jsx(s,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"API Health"}),S?e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(f,{size:20}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Checking…"})]}):M?e.jsxs(z,{severity:"error",icon:e.jsx(ie,{}),children:["API unreachable — check backend deployment and ",e.jsx("code",{children:"BALL_DONT_LIE_API_KEY"}),"."]}):e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(c,{icon:e.jsx(R,{}),label:"Operational",color:"success",variant:"outlined",sx:{alignSelf:"flex-start"}}),e.jsxs(l,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Version: ",e.jsx("strong",{children:d==null?void 0:d.version})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Uptime: ",e.jsx("strong",{children:(d==null?void 0:d.uptime)!=null?ue(d.uptime):"—"})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Checked: ",e.jsx("strong",{children:d!=null&&d.timestamp?new Date(d.timestamp).toLocaleTimeString():"—"})]})]})]})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2.5,height:"100%"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1.5},children:[e.jsx(de,{fontSize:"small",color:"primary"}),e.jsx(s,{variant:"h6",fontWeight:600,children:"Prediction Activity"})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Matchup Edge predictions run in this browser."}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:6,children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h3",fontWeight:700,color:"primary.main",children:i}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last 7 days"})]})}),e.jsx(o,{item:!0,xs:6,children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h3",fontWeight:700,color:"text.primary",children:h}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last 30 days"})]})})]})]})})]}),e.jsxs(x,{sx:{p:2.5,mb:3},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(le,{fontSize:"small",color:"primary"}),e.jsx(s,{variant:"h6",fontWeight:600,children:"Active Endpoints"})]}),e.jsx(T,{children:e.jsxs(L,{size:"small",children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Path"}),e.jsx(r,{sx:{fontWeight:600},children:"Description"}),e.jsx(r,{sx:{fontWeight:600},children:"Method"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"})]})}),e.jsx(W,{children:pe.map((t,u)=>e.jsxs(p,{children:[e.jsx(r,{sx:{fontFamily:"monospace",fontSize:"0.78rem",color:"text.secondary"},children:t.path}),e.jsx(r,{children:t.label}),e.jsx(r,{children:e.jsx(c,{label:t.method,size:"small",variant:"outlined",color:t.method==="POST"?"secondary":"default"})}),e.jsx(r,{children:S?e.jsx(f,{size:14}):e.jsx(c,{size:"small",label:P?"Active":"Unknown",color:P?"success":"default",variant:"outlined",icon:P?e.jsx(R,{}):void 0})})]},`${t.path}-${t.method}-${u}`))})]})})]}),e.jsxs(x,{sx:{p:2.5,mb:3},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(ce,{fontSize:"small",color:"primary"}),e.jsx(s,{variant:"h6",fontWeight:600,children:"Cache Configuration"})]}),e.jsx(T,{children:e.jsxs(L,{size:"small",children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Cache"}),e.jsx(r,{sx:{fontWeight:600},children:"TTL"}),e.jsx(r,{sx:{fontWeight:600},children:"Scope"}),e.jsx(r,{sx:{fontWeight:600},children:"Notes"})]})}),e.jsx(W,{children:ge.map(t=>e.jsxs(p,{children:[e.jsx(r,{children:t.label}),e.jsx(r,{children:e.jsx(c,{label:t.ttl,size:"small",variant:"outlined"})}),e.jsx(r,{children:e.jsx(c,{label:t.scope,size:"small",color:t.scope==="Server"?"primary":"default",variant:"outlined"})}),e.jsx(r,{sx:{color:"text.secondary",fontSize:"0.8rem"},children:t.note})]},t.label))})]})})]}),e.jsxs(x,{sx:{p:2.5,mb:3},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(ae,{fontSize:"small",color:"primary"}),e.jsx(s,{variant:"h6",fontWeight:600,children:"Tracked Picks"}),a.isLoading&&e.jsx(f,{size:16})]}),!a.isLoading&&!_&&e.jsxs(z,{severity:"info",sx:{mb:2},children:["Picks are stored in this browser only. To sync across devices, set up Vercel KV:"," ",e.jsx("code",{children:"vercel kv create nba-picks && vercel env pull"})]}),a.isError&&e.jsx(z,{severity:"warning",sx:{mb:2},children:"Could not load pick history. Backend may be unreachable."}),e.jsxs(o,{container:!0,spacing:2,sx:{mb:C.length>0?2:0},children:[e.jsx(o,{item:!0,xs:6,children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h3",fontWeight:700,color:"primary.main",children:a.isLoading?"—":k}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last 7 days"}),!a.isLoading&&k>0&&e.jsxs(l,{sx:{display:"flex",justifyContent:"center",gap:.5,mt:.5},children:[e.jsx(c,{label:`${A} signal${A!==1?"s":""}`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}}),e.jsx(c,{label:`${$} bet${$!==1?"s":""}`,size:"small",color:"secondary",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})]})]})}),e.jsx(o,{item:!0,xs:6,children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h3",fontWeight:700,color:"text.primary",children:a.isLoading?"—":v}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last 30 days"}),!a.isLoading&&v>0&&e.jsxs(l,{sx:{display:"flex",justifyContent:"center",gap:.5,mt:.5},children:[e.jsx(c,{label:`${w} signal${w!==1?"s":""}`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}}),e.jsx(c,{label:`${I} bet${I!==1?"s":""}`,size:"small",color:"secondary",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})]})]})})]}),C.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:"Recent picks"}),e.jsx(T,{children:e.jsxs(L,{size:"small",children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Player"}),e.jsx(r,{sx:{fontWeight:600},children:"Type"}),e.jsx(r,{sx:{fontWeight:600},children:"Stat"}),e.jsx(r,{sx:{fontWeight:600},children:"Direction"}),e.jsx(r,{sx:{fontWeight:600},children:"Line"}),e.jsx(r,{sx:{fontWeight:600},children:"Confidence"}),e.jsx(r,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(W,{children:C.map(t=>e.jsxs(p,{children:[e.jsxs(r,{children:[e.jsx(s,{variant:"body2",fontWeight:500,children:t.player_name}),e.jsx(s,{variant:"caption",color:"text.secondary",children:t.team})]}),e.jsx(r,{children:e.jsx(c,{label:t.type==="bet"?"Bet":"Signal",size:"small",color:t.type==="bet"?"secondary":"default",variant:"outlined"})}),e.jsx(r,{children:e.jsx(c,{label:(t.stat??t.market??"?").toUpperCase(),size:"small",variant:"outlined"})}),e.jsx(r,{children:e.jsx(c,{label:t.direction.charAt(0).toUpperCase()+t.direction.slice(1),size:"small",color:t.direction==="over"?"success":"error",variant:"outlined"})}),e.jsx(r,{sx:{color:"text.secondary"},children:t.line!=null?t.line:"—"}),e.jsx(r,{children:e.jsx(c,{label:t.confidence_tier,size:"small",color:t.confidence_tier==="high"?"success":t.confidence_tier==="medium"?"warning":"default",variant:"outlined"})}),e.jsx(r,{sx:{color:"text.secondary",fontSize:"0.78rem"},children:new Date(t.created_at).toLocaleDateString()})]},t.id))})]})})]}),!a.isLoading&&!a.isError&&v===0&&e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:1},children:["No picks tracked yet — use the ",e.jsx("strong",{children:"Edge Feed"})," to log your first pick."]})]}),e.jsxs(x,{sx:{p:2.5,mb:3},children:[e.jsx(s,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Upcoming Games"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Click any game to open it in Matchup Edge."}),e.jsx(ne,{onSelectGame:F})]}),e.jsx(K,{sx:{my:3}}),e.jsx(s,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Page Performance"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Real-time Web Vitals for this browser session."}),e.jsx(x,{sx:{p:3},children:e.jsx(me,{})})]})};export{Te as default};
//# sourceMappingURL=PerformanceDashboard-NC-bwdp6.js.map
